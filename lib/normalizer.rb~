# encoding: utf-8 
require "epsilon_production_eliminator"  
class ContextFreeGrammar
  	attr_reader  :terminals, :variables, :start_symbol, :productions

	include EpsilonProductionEliminator

	def initialize(terminals=[], variables = [], start_symbol = [] , productions={})

		raise ArgumentError, 'Terminals must be not empty'  if terminals==nil || terminals.empty? 
		raise ArgumentError, 'Variables must be not empty'  if variables==nil || variables.empty? 
		raise ArgumentError, 'Start symbol must be not empty'  if  start_symbol==nil 
		raise ArgumentError, 'Productions must be not empty'  if productions==nil || productions.empty?

		raise ArgumentError, 'Variables must contain Start Symbol' unless variables.include?(start_symbol)
		#    raise ArgumentError, 'For all Variable exists Production'

		@terminals=terminals    
		@variables = variables                   
		@start_symbol = start_symbol 
		@productions = productions

	end     

	def eliminate_epsilon_production
		ContextFreeGrammar.new(
			@terminals,
			@variables,
			@start_symbol,
			productions_result_of_epsilon_elimination( @terminals, @variables, @productions )
		)
	end
end  


